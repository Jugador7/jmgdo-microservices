Task 2 - Run a GraphQL service
Open a terminal window by using the top menu in the IDE: Terminal > New Terminal.

In the terminal, clone the repository which has the GraphQL service code ready by pasting the following command. The repository that you clone has code that will run a GraphQL service where we can query details on US cities and states.

1
git clone https://github.com/ibm-developer-skills-network/jmgdo-microservices.git
Copied!
Change the working directory to jmgdo-microservices/graphql_example by running the following command.
1
cd jmgdo-microservices/graphql_example
Copied!
Build the application by running the following command. This will build the docker application using the docker file in the current directory and tag it graphqlservice.
1
docker build . -t graphqlservice
Copied!
Run the application that you just built on port 8080, by running the following command on the terminal.
1
docker run -dp 8080:4000 graphqlservice
Copied!
You will get a hex code that indicates the application has started.

To confirm that the service is running, execute the following command.
1
curl localhost:8080
Copied!
cURL localhost
If the output is as seen in the image above, your service is up and running.

Click on the Skills Network button on the left, it will open the "Skills Network Toolbox". Then click Launch Application, from there you enter the port no. as 8080 and click Your Application button. This will open a browser window.

This will launch a browser page. Copy the URL that you see in the address bar.

App URL







Task 3 - Run GraphQL queries on Postman
Go to www.postman.com and sign in to Postman. Please note that the home page may look different for every person depending on the day of the year and the region you are signing in from.

On the homepage, click Create new.

Postman homepage
This brings up the set of options you can use with Postman. Choose HttpRequest.

HTTPRequest option
In the space provided for the GET request URL paste the URL you copied from step 8 of the previous task and suffix it with /graphql.
Postman request
Choose Body and GraphQL as shown in the image below to start entering your query.
Postman Body and GraphQL
You will first query for all the cities in the US. What you can get is the city name and the state they are in. Paste the following in the Query tab and click Send.
1
2
3
4
5
6
{
    cities {
        city
        state
        }
}
Copied!
Query for all US cities
As you can see, it lists all the 5980 cities in the US in the output tab.

You can now try to retrieve just the names of the cities in a particular state. To do this, you need to pass the state as a parameter. You will now request the state name in the return value as you are querying only for one state.
1
2
3
4
5
{
    cities(state:"Florida") {
        city
    }
}
Copied!
Query for Florida cities
As you can see, only the names of the cities in Florida are returned.





Construct a query to return all the cities in the state of “Ohio”, along with the state name.
Click here for the solution
1
2
3
4
5
6
{
    cities(state:"Ohio") {
        city
        state
    }
}
Copied!
Congratulations! You have learned to construct queries using GraphQL.

Tutorial details
Author: Lavanaya T S

Contributors: Pallavi Rai